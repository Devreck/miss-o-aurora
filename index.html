<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083; background-color: #171818}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s5 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s6 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s7 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s8 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s9 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s11 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s12 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s13 {font-kerning: none}
    span.s14 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s15 {font-kerning: none; color: #cacaca; -webkit-text-stroke: 0px #cacaca}
    span.s16 {font-kerning: none; color: #d4d4d4; -webkit-text-stroke: 0px #d4d4d4}
    span.s17 {font-kerning: none; color: #f67c30; -webkit-text-stroke: 0px #f67c30}
    span.s18 {font-kerning: none; color: #ee2e38; -webkit-text-stroke: 0px #ee2e38}
    span.s19 {font-kerning: none; color: #a34f83; background-color: #171818; -webkit-text-stroke: 0px #a34f83}
    span.s20 {font-kerning: none; color: #ee2e38; background-color: #171818; -webkit-text-stroke: 0px #ee2e38}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"pt-BR"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s1">Missão: S.O.S. Aurora - Uma Aventura de Física</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.gstatic.com"</span><span class="s5"> </span><span class="s2">crossorigin</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&amp;family=Roboto+Slab:wght@300;400;700&amp;display=swap"</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- MathJax para renderização de equações matemáticas --&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">MathJax</span><span class="s1"> </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>tex</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>inlineMath</span><span class="s8">:</span><span class="s1"> </span><span class="s8">[[</span><span class="s9">'$'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'$'</span><span class="s8">],</span><span class="s1"> </span><span class="s8">[</span><span class="s9">'\\('</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'\\)'</span><span class="s8">]],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>displayMath</span><span class="s8">:</span><span class="s1"> </span><span class="s8">[[</span><span class="s9">'$$'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'$$'</span><span class="s8">],</span><span class="s1"> </span><span class="s8">[</span><span class="s9">'\\['</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'\\]'</span><span class="s8">]]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span>svg</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>fontCache</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'global'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"MathJax-script"</span><span class="s5"> </span><span class="s2">async</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">body</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Roboto Slab'</span><span class="s8">,</span><span class="s1"> </span><span class="s6">serif</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #0c0a1e</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">background-image:</span><span class="s5"> </span><span class="s6">url</span><span class="s8">(</span><span class="s1">'https://www.transparenttextures.com/patterns/stardust.png'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">#game-container</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Roboto Slab'</span><span class="s8">,</span><span class="s1"> </span><span class="s6">serif</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-width:</span><span class="s1"> </span><span class="s10">2px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-style:</span><span class="s1"> </span><span class="s6">solid</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-image:</span><span class="s1"> </span><span class="s6">linear-gradient(to</span><span class="s1"> </span><span class="s6">bottom</span><span class="s1"> </span><span class="s6">right</span><span class="s8">,</span><span class="s1"> #8A2BE2</span><span class="s8">,</span><span class="s1"> #4169E1</span><span class="s8">,</span><span class="s1"> #00BFFF</span><span class="s6">)</span><span class="s1"> </span><span class="s10">1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">25px</span><span class="s1"> </span><span class="s6">rgba(</span><span class="s10">65</span><span class="s8">,</span><span class="s1"> </span><span class="s10">105</span><span class="s8">,</span><span class="s1"> </span><span class="s10">225</span><span class="s8">,</span><span class="s1"> </span><span class="s10">0.4</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">h2</span><span class="s8">,</span><span class="s5"> </span><span class="s1">.font-orbitron</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Orbitron'</span><span class="s8">,</span><span class="s1"> </span><span class="s6">sans-serif</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">text-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">5px</span><span class="s1"> #00BFFF</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.action-button</span><span class="s8">,</span><span class="s5"> </span><span class="s1">.gemini-button</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s1"> </span><span class="s6">all</span><span class="s1"> </span><span class="s10">0.3s</span><span class="s1"> </span><span class="s6">ease</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">2px</span><span class="s1"> </span><span class="s10">5px</span><span class="s1"> </span><span class="s6">rgba(</span><span class="s10">0</span><span class="s8">,</span><span class="s10">0</span><span class="s8">,</span><span class="s10">0</span><span class="s8">,</span><span class="s10">0.5</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">border-bottom-width:</span><span class="s5"> </span><span class="s10">4px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.action-button:hover</span><span class="s8">,</span><span class="s5"> </span><span class="s1">.gemini-button:hover</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s6">translateY(</span><span class="s10">-2px</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s10">10px</span><span class="s1"> </span><span class="s6">rgba(</span><span class="s10">0</span><span class="s8">,</span><span class="s10">0</span><span class="s8">,</span><span class="s10">0</span><span class="s8">,</span><span class="s10">0.6</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.action-button:disabled</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s6">not-allowed</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.slide-content</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s10">0</span><span class="s8">;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s5"> </span><span class="s1">opacity</span><span class="s5"> </span><span class="s10">0.7s</span><span class="s5"> </span><span class="s1">ease-in-out</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.slide-content.visible</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s10">1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.feedback</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-left:</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s6">solid</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">1rem</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s10">1rem</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">8px</span><span class="s1"> </span><span class="s10">8px</span><span class="s1"> </span><span class="s10">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-correct</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s1"> #34d399</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* emerald-400 */</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">background-color:</span><span class="s5"> </span><span class="s6">rgba(</span><span class="s10">16</span><span class="s8">,</span><span class="s5"> </span><span class="s10">185</span><span class="s8">,</span><span class="s5"> </span><span class="s10">129</span><span class="s8">,</span><span class="s5"> </span><span class="s10">0.1</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.feedback-incorrect</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span></span><span class="s2">border-color:</span><span class="s1"> #f87171</span><span class="s8">;</span><span class="s1"> </span><span class="s11">/* red-400 */</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">background-color:</span><span class="s5"> </span><span class="s6">rgba(</span><span class="s10">248</span><span class="s8">,</span><span class="s5"> </span><span class="s10">113</span><span class="s8">,</span><span class="s5"> </span><span class="s10">113</span><span class="s8">,</span><span class="s5"> </span><span class="s10">0.1</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.gemini-response</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-top:</span><span class="s1"> </span><span class="s10">2px</span><span class="s1"> </span><span class="s6">dashed</span><span class="s1"> #4169E1</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">background-color:</span><span class="s5"> </span><span class="s6">rgba(</span><span class="s10">65</span><span class="s8">,</span><span class="s5"> </span><span class="s10">105</span><span class="s8">,</span><span class="s5"> </span><span class="s10">225</span><span class="s8">,</span><span class="s5"> </span><span class="s10">0.05</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s10">1rem</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s10">1.5rem</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s5"> </span><span class="s10">8px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">.loader</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s6">solid</span><span class="s1"> #f3f3f3</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-top:</span><span class="s1"> </span><span class="s10">4px</span><span class="s1"> </span><span class="s6">solid</span><span class="s1"> #4169E1</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s5"> </span><span class="s10">50%</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">width:</span><span class="s1"> </span><span class="s10">24px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s10">24px</span><span class="s8">;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">animation:</span><span class="s5"> </span><span class="s1">spin</span><span class="s5"> </span><span class="s10">1s</span><span class="s5"> </span><span class="s1">linear</span><span class="s5"> </span><span class="s1">infinite</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-right:</span><span class="s1"> </span><span class="s10">10px</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">@keyframes</span><span class="s1"> </span><span class="s6">spin</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">0%</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s6">rotate(</span><span class="s10">0deg</span><span class="s6">)</span><span class="s8">;</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s10">100%</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s6">rotate(</span><span class="s10">360deg</span><span class="s6">)</span><span class="s8">;</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">mjx-container</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s5"> #e5e7eb</span><span class="s8">;</span><span class="s5"> </span><span class="s1">/* Cor do texto (gray-200) */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.modal-overlay</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">position:</span><span class="s1"> </span><span class="s6">fixed</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">inset:</span><span class="s1"> </span><span class="s10">0</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">background-color:</span><span class="s5"> </span><span class="s6">rgba(</span><span class="s10">12</span><span class="s8">,</span><span class="s5"> </span><span class="s10">10</span><span class="s8">,</span><span class="s5"> </span><span class="s10">30</span><span class="s8">,</span><span class="s5"> </span><span class="s10">0.8</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">backdrop-filter:</span><span class="s5"> </span><span class="s6">blur(</span><span class="s10">4px</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s6">flex</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s6">center</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">justify-content:</span><span class="s5"> </span><span class="s6">center</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">z-index:</span><span class="s1"> </span><span class="s10">50</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">.modal-content</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #1a1a2e</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s10">1px</span><span class="s1"> </span><span class="s6">solid</span><span class="s1"> #4169E1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">25px</span><span class="s1"> </span><span class="s6">rgba(</span><span class="s10">65</span><span class="s8">,</span><span class="s1"> </span><span class="s10">105</span><span class="s8">,</span><span class="s1"> </span><span class="s10">225</span><span class="s8">,</span><span class="s1"> </span><span class="s10">0.4</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">body</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-[#0c0a1e] text-gray-200 flex items-center justify-center min-h-screen p-4"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"game-container"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full max-w-4xl bg-[#1a1a2e] rounded-lg p-6 md:p-8 relative"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"score-display"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"absolute top-4 left-4 font-orbitron text-lg text-cyan-300"</span><span class="s3">&gt;</span><span class="s5">PONTUAÇÃO: 0</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"absolute top-4 right-4"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"reset-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"action-button bg-gray-700 hover:bg-gray-600 text-white border-gray-900 font-bold py-2 px-4 rounded-md"</span><span class="s5"> </span><span class="s2">title</span><span class="s3">=</span><span class="s1">"Reiniciar a missão do zero. Todo o progresso e pontuação serão perdidos."</span><span class="s3">&gt;</span><span class="s5">Reiniciar Missão</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"slide-content"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"slide-content mt-12"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"slide-image-container"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-4"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"slide-text-container"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"slide-choices-container"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 space-y-3"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gemini-output-container"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-4"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Modals --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"enem-modal"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"modal-overlay hidden"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"modal-content p-8 rounded-lg max-w-lg text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"font-orbitron text-2xl text-yellow-400 mb-4"</span><span class="s3">&gt;</span><span class="s1">E.N.E.M (Enciclopédia de Navegação e Engenharia da Missão)</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-gray-300 mb-6"</span><span class="s3">&gt;</span><span class="s1">Atenção: Acessar a E.N.E.M. projeta o terminal holográfico da Enciclopédia de Navegação e Engenharia da Missão, liberando desafios de treinamento interplanetário específicos dos sistemas que você está analisando, deseja continuar?</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-center space-x-4"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"enem-confirm-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"action-button bg-blue-600 hover:bg-blue-500 text-white border-blue-800 px-8 py-2"</span><span class="s5"> </span><span class="s2">title</span><span class="s3">=</span><span class="s1">"Confirmar e acessar os desafios E.N.E.M."</span><span class="s3">&gt;</span><span class="s5">Sim</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"enem-cancel-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"action-button bg-red-600 hover:bg-red-500 text-white border-red-800 px-8 py-2"</span><span class="s5"> </span><span class="s2">title</span><span class="s3">=</span><span class="s1">"Cancelar e retornar ao diagnóstico atual."</span><span class="s3">&gt;</span><span class="s5">Não</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"video-modal"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"modal-overlay hidden"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"modal-content p-6 rounded-lg max-w-4xl w-full"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-between items-center mb-4"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">h3</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"font-orbitron text-2xl text-red-400"</span><span class="s3">&gt;</span><span class="s1">Banco de Imagens Primitivas</span><span class="s3">&lt;/</span><span class="s4">h3</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"video-close-btn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-gray-400 hover:text-white"</span><span class="s5"> </span><span class="s2">title</span><span class="s3">=</span><span class="s1">"Fechar o banco de imagens."</span><span class="s3">&gt;</span><span class="s5">&amp;times;</span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"video-grid"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"space-y-6"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// --- BANCO DE DADOS DA HISTÓRIA ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> storyData </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">'1'</span><span class="s8">:{</span><span class="s5">title</span><span class="s8">:</span><span class="s1">"S.O.S. Estação Aurora"</span><span class="s8">,</span><span class="s5">image</span><span class="s8">:</span><span class="s1">"https://placehold.co/800x400/0c0a1e/4169E1?text=Alerta+Vermelho+na+Ponte"</span><span class="s8">,</span><span class="s5">text</span><span class="s8">:</span><span class="s1">`O som estridente do alarme corta o silêncio da Estação Espacial Aurora. Luzes vermelhas pulsam nos corredores metálicos. Na ponte de comando, a I.A. Central projeta um aviso holográfico:&lt;br&gt;&lt;br&gt;&lt;strong&gt;"ALERTA. FALHA CASCATA DETECTADA. SISTEMAS DE SUPORTE À VIDA EM NÍVEL CRÍTICO. TEMPERATURA INTERNA INSTÁVEL."&lt;/strong&gt;&lt;br&gt;&lt;br&gt;Como o(a) mais novo(a) Cadete de Engenharia a bordo, todos os olhares se voltam para você. A Comandante Eva Rostova aponta para o painel principal.&lt;br&gt;— Cadete, os sistemas de controle térmico entraram em colapso. Precisamos de você. Estabilize a temperatura antes que seja tarde demais. Sua missão começa agora.`</span><span class="s8">,</span><span class="s5">choices</span><span class="s8">:[{</span><span class="s5">text</span><span class="s8">:</span><span class="s1">"Assumir o controle e iniciar diagnóstico"</span><span class="s8">,</span><span class="s5">nextSlide</span><span class="s8">:</span><span class="s1">'c1_hub'</span><span class="s8">}]},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">'c1_hub'</span><span class="s8">:{</span><span class="s5">isHub:!</span><span class="s14">0</span><span class="s8">,</span><span class="s5">chapter</span><span class="s8">:</span><span class="s14">1</span><span class="s8">,</span><span class="s5">title</span><span class="s8">:</span><span class="s1">"Cap. 1 – O Coração Gelado"</span><span class="s8">,</span><span class="s5">image</span><span class="s8">:</span><span class="s1">"https://placehold.co/800x400/1a1a2e/87CEEB?text=Controle+de+Suporte+à+Vida"</span><span class="s8">,</span><span class="s5">text</span><span class="s8">:</span><span class="s1">"A falha no sistema de suporte à vida parece ter múltiplas causas. Você precisa diagnosticar e reparar cada subsistema para restaurar a estabilidade. Escolha um bloco de diagnóstico para começar."</span><span class="s8">,</span><span class="s5">blocks</span><span class="s8">:[{</span><span class="s5">id</span><span class="s8">:</span><span class="s1">'b3'</span><span class="s8">,</span><span class="s5">name</span><span class="s8">:</span><span class="s1">'Protocolo de Calibração (Termometria)'</span><span class="s8">,</span><span class="s5">startSlide</span><span class="s8">:</span><span class="s1">'c1_b3_s1'</span><span class="s8">},{</span><span class="s5">id</span><span class="s8">:</span><span class="s1">'b4'</span><span class="s8">,</span><span class="s5">name</span><span class="s8">:</span><span class="s1">'Contenção de Fuga Térmica (Calorimetria)'</span><span class="s8">,</span><span class="s5">startSlide</span><span class="s8">:</span><span class="s1">'c1_b4_s1'</span><span class="s8">},{</span><span class="s5">id</span><span class="s8">:</span><span class="s1">'b5'</span><span class="s8">,</span><span class="s5">name</span><span class="s8">:</span><span class="s1">'Integridade Estrutural (Condução)'</span><span class="s8">,</span><span class="s5">startSlide</span><span class="s8">:</span><span class="s1">'c1_b5_s1'</span><span class="s8">},{</span><span class="s5">id</span><span class="s8">:</span><span class="s1">'b6'</span><span class="s8">,</span><span class="s5">name</span><span class="s8">:</span><span class="s1">'Controle Ambiental (Radiação &amp; Convecção)'</span><span class="s8">,</span><span class="s5">startSlide</span><span class="s8">:</span><span class="s1">'c1_b6_s1'</span><span class="s8">}],</span><span class="s5">nextChapterSlide</span><span class="s8">:</span><span class="s1">'c2_hub'</span><span class="s8">},</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">// Bloco 3: Termometria</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b3_s1'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b3'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Protocolo de Calibração (1/3): Escalas"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: Detectada anomalia no sistema de refrigeração. A unidade de controle, um modelo Aratech legado, opera em Fahrenheit. Os sensores principais, no entanto, reportam em Celsius. A conversão precisa é essencial para evitar o congelamento da linha de plasma."</span><span class="s16">,</span><span class="s15">nextSlideInBlock</span><span class="s16">:</span><span class="s13">'c1_b3_s2'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique os conceitos de escalas termométricas. Detalhe a origem das escalas Celsius e Fahrenheit, seus pontos fixos e por que a escala Kelvin é considerada absoluta. Enfatize a importância da precisão na conversão para a segurança dos sistemas."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">"Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: 'O painel de controle do núcleo do reator mostra uma leitura de temperatura em graus Celsius, mas o sistema de refrigeração de emergência só aceita comandos em graus Fahrenheit.' A pergunta deve exigir a conversão de um valor. O feedback deve mostrar a fórmula $$T_{F} = T_{C} \\cdot 1.8 + 32$$ em modo de exibição e o cálculo passo a passo."</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b3_s2'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b3'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Protocolo de Calibração (2/3): Variação"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: A falha parece estar na interpretação das &lt;strong&gt;variações&lt;/strong&gt; de temperatura. Uma variação de 1°C não é o mesmo que uma variação de 1°F, mas é idêntica a uma variação de 1 K. Os atuadores do sistema de refrigeração estão respondendo de forma desproporcional."</span><span class="s16">,</span><span class="s15">nextSlideInBlock</span><span class="s16">:</span><span class="s13">'c1_b3_s3'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique a diferença entre a conversão de um ponto de temperatura e a conversão de uma &lt;strong&gt;variação&lt;/strong&gt; de temperatura ($\\Delta T$). Explique por que $\\Delta T_C = \\Delta T_K$ e por que $\\Delta T_F = 1.8 \\cdot \\Delta T_C$."</span><span class="s16">,</span><span class="s15">geminiConceptPrompt</span><span class="s16">:</span><span class="s13">"Você é a I.A. da Estação Aurora. Crie um desafio CONCEITUAL com 5 opções de resposta. O cenário: 'Dois sensores medem a variação de temperatura de um componente. O sensor A (em Celsius) registra uma variação de 15°C. O sensor B (em Kelvin) registra uma variação de 15 K. O sensor C (em Fahrenheit) registra uma variação de 15°F.' A pergunta deve ser: 'Quais sensores registraram a mesma variação de energia térmica?'. O feedback deve explicar por que a variação em Celsius e Kelvin são equivalentes, enquanto a de Fahrenheit é diferente."</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b3_s3'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b3'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Protocolo de Calibração (3/3): Função Termométrica"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: Alguns sensores antigos não são padronizados. Eles relacionam uma propriedade física (como a resistência de um fio) com a temperatura através de uma função linear. Precisamos saber como calibrar um desses sensores usando dois pontos fixos conhecidos, como os pontos de fusão e ebulição da água."</span><span class="s16">,</span><span class="s15">nextHub</span><span class="s16">:</span><span class="s13">'c1_hub'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique como construir a equação de uma escala termométrica arbitrária ($T_X$) em relação a uma escala conhecida ($T_C$), usando dois pontos fixos e a relação $$\\frac{T_C - T_{C1}}{T_{C2} - T_{C1}} = \\frac{T_X - T_{X1}}{T_{X2} - T_{X1}}$$. Detalhe o que cada termo significa."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">"Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: 'Um termômetro descalibrado marca 10°X no ponto de fusão do gelo (0°C) e 90°X no ponto de ebulição da água (100°C). Qual temperatura em Celsius corresponde a 50°X?'. O feedback deve mostrar o passo a passo da resolução usando a relação entre as escalas, com as fórmulas principais em modo de exibição ($$fórmula$$)."</span><span class="s16">},</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">// Bloco 4: Trocas de Calor</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b4_s1'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b4'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Contenção de Fuga Térmica (1/3): Capacidade Térmica"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: Cada material a bordo reage de forma diferente ao calor. Alguns, como a água usada na refrigeração, possuem alto calor específico e podem absorver muita energia. Outros, como os metais do casco, têm baixa capacidade térmica e aquecem rapidamente. Essa distinção é vital."</span><span class="s16">,</span><span class="s15">nextSlideInBlock</span><span class="s16">:</span><span class="s13">'c1_b4_s2'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique a diferença fundamental entre &lt;strong&gt;Calor Específico&lt;/strong&gt; ($c$) e &lt;strong&gt;Capacidade Térmica&lt;/strong&gt; ($C$). Explique que 'c' é uma propriedade intensiva do material, enquanto 'C' é uma propriedade extensiva do objeto ($C=m \\cdot c$)."</span><span class="s16">,</span><span class="s15">geminiConceptPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio CONCEITUAL com 5 opções de resposta. **REGRA DE VARIAÇÃO: Aleatoriamente, decida se o material A ou B terá o maior calor específico e construa a pergunta e o feedback com base nessa escolha, para que a resposta correta não seja sempre a mesma.** O cenário: "Dois componentes de mesma massa, feitos de materiais diferentes, recebem a mesma quantidade de calor de uma fonte de energia. O sensor de diagnóstico registra a variação de temperatura de cada um." A pergunta deve levar o cadete a identificar qual material tem o maior calor específico com base nas variações de temperatura. O feedback deve explicar a relação inversa entre calor específico e variação de temperatura para uma dada quantidade de calor.`</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b4_s2'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b4'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Contenção de Fuga Térmica (2/3): Calor Latente"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: Os sistemas de refrigeração de emergência usam a vaporização de líquidos para absorver enormes quantidades de calor sem aumentar a temperatura. Este é o conceito de calor latente. Precisamos verificar se a energia da fuga térmica é suficiente para causar uma mudança de fase no refrigerante."</span><span class="s16">,</span><span class="s15">nextSlideInBlock</span><span class="s16">:</span><span class="s13">'c1_b4_s3'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique o conceito de &lt;strong&gt;Calor Latente&lt;/strong&gt;. Descreva como a energia é usada para quebrar as ligações intermoleculares durante uma mudança de fase (fusão, vaporização) sem alterar a temperatura do sistema. Use a fórmula $$Q = m \\cdot L$$ para ilustrar."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: "Uma massa de gelo a 0°C precisa ser completamente derretida. Dado o calor latente de fusão da água, o cadete deve calcular a quantidade de calor necessária." O feedback deve mostrar a fórmula </span><span class="s18">$$</span><span class="s13">Q = m \\cdot L</span><span class="s18">$$</span><span class="s13"> em modo de exibição e o cálculo.`</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b4_s3'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b4'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Contenção de Fuga Térmica (3/3): Equilíbrio"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: Alerta! Fluido do sistema de refrigeração primário vazou para o reservatório secundário. Os dois fluidos estão em temperaturas diferentes. É preciso prever a temperatura de equilíbrio para evitar danos por choque térmico."</span><span class="s16">,</span><span class="s15">nextHub</span><span class="s16">:</span><span class="s13">'c1_hub'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique o &lt;strong&gt;Princípio das Trocas de Calor&lt;/strong&gt; em sistemas isolados. Detalhe que a soma das quantidades de calor trocadas é nula ($$\\sum Q = 0$$), o que significa que o calor cedido pelos corpos mais quentes é igual ao calor recebido pelos corpos mais frios."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: "Uma peça de metal superaquecida de um motor é ejetada em um tanque de água de refrigeração." **REGRA DE VARIAÇÃO: Os dados podem estar em unidades diferentes (ex: massa em gramas, calor específico em J/kg°C ou cal/g°C), exigindo conversão. Os materiais e o contexto podem variar (ex: fluido criogênico resfriando um sensor, etc.).** A pergunta deve exigir o cálculo da temperatura final de equilíbrio do sistema. O feedback deve mostrar a aplicação do princípio das trocas de calor, começando com a equação fundamental em modo de exibição: </span><span class="s18">$$</span><span class="s13">Q_{\\text{recebido}} + Q_{\\text{cedido}} = 0</span><span class="s18">$$</span><span class="s13"> Em seguida, mostre o cálculo passo a passo de forma clara e organizada, com cada passo em uma nova linha.`</span><span class="s16">},</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">// Outros blocos...</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b5_s1'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b5'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Integridade Estrutural (1/2): Lei de Fourier"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: Sensores indicam uma perda de calor anormal em uma seção do casco. A energia está se propagando por condução através de painéis que deveriam ser isolantes. É preciso entender a Lei de Fourier para quantificar e mitigar essa perda."</span><span class="s16">,</span><span class="s15">nextSlideInBlock</span><span class="s16">:</span><span class="s13">'c1_b5_s2'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique a &lt;strong&gt;Lei de Fourier&lt;/strong&gt; para o fluxo de calor ($Φ = \\frac{k \\cdot A \\cdot \\Delta T}{L}$). Detalhe o que cada variável representa (condutividade térmica, área, variação de temperatura, espessura) e como elas influenciam a taxa de transferência de calor."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: "Um painel do casco da nave, com área, espessura e condutividade térmica conhecidas, está com uma face exposta ao frio do espaço e a outra face em contato com o ambiente interno aquecido." A pergunta deve ser sobre o cálculo do fluxo de calor (potência térmica) através do painel. O feedback deve mostrar a Lei de Fourier em modo de exibição (</span><span class="s18">$$</span><span class="s13">Φ = \\frac{k \\cdot A \\cdot \\Delta T}{L}</span><span class="s18">$$</span><span class="s13">) e o cálculo detalhado.`</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b5_s2'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b5'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Integridade Estrutural (2/2): Materiais"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: A escolha do material é tudo. Alguns materiais são excelentes condutores, outros são isolantes. Sua condutividade térmica ($k$) define sua função. A falha pode estar em um painel de material inadequado."</span><span class="s16">,</span><span class="s15">nextHub</span><span class="s16">:</span><span class="s13">'c1_hub'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique o conceito de &lt;strong&gt;condutividade térmica&lt;/strong&gt; ($k$). Compare materiais condutores (metais) e isolantes (cerâmicas, vácuo), explicando como a estrutura atômica de cada um facilita ou dificulta a transferência de energia por vibrações."</span><span class="s16">,</span><span class="s15">geminiConceptPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio CONCEITUAL com 5 opções de resposta. **REGRA DE VARIAÇÃO: Aleatoriamente, decida qual material (A ou B) terá a maior condutividade e construa a questão e o feedback com base nisso.** O cenário: "Temos dois painéis de materiais diferentes, A e B, com a mesma área e espessura. Ambos são submetidos à mesma diferença de temperatura." A pergunta deve ser sobre qual painel permitirá um maior fluxo de calor e por quê. O feedback deve explicar a relação direta entre a condutividade térmica (</span><span class="s18">$</span><span class="s13">k</span><span class="s18">$</span><span class="s13">) e o fluxo de calor.`</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b6_s1'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b6'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Controle Ambiental (1/2): Convecção"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: O calor não se move apenas através de sólidos. As correntes de ar no nosso sistema de ventilação transferem calor por convecção. Uma falha nessas correntes pode criar pontos perigosamente quentes ou frios no habitat."</span><span class="s16">,</span><span class="s15">nextSlideInBlock</span><span class="s16">:</span><span class="s13">'c1_b6_s2'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique o processo de &lt;strong&gt;Convecção&lt;/strong&gt;. Diferencie convecção natural (causada por diferenças de densidade induzidas pela temperatura, dependente da gravidade) e convecção forçada (causada por ventiladores e bombas), ambas cruciais para o sistema de suporte à vida."</span><span class="s16">,</span><span class="s15">geminiConceptPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio CONCEITUAL com 5 opções de resposta. O cenário: "Em um ambiente de microgravidade, um aquecedor é ligado. Como o ar aquecido se comportará em comparação com um ambiente com gravidade normal?" A pergunta deve testar o entendimento de que a convecção natural depende da gravidade (densidade). O feedback deve explicar que, sem gravidade, as correntes de convecção natural não se formam eficientemente.`</span><span class="s16">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c1_b6_s2'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">1</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b6'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Controle Ambiental (2/2): Radiação"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: No vácuo, a principal forma de transferência de calor é a radiação. Os painéis radiadores da estação dissipam o excesso de calor para o espaço. A eficiência deles depende da temperatura e das propriedades da superfície. Uma falha aqui é crítica."</span><span class="s16">,</span><span class="s15">nextHub</span><span class="s16">:</span><span class="s13">'c1_hub'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique a &lt;strong&gt;Radiação Térmica&lt;/strong&gt;. Detalhe que todo corpo com temperatura acima do zero absoluto emite ondas eletromagnéticas e explique a Lei de Stefan-Boltzmann ($P = \\sigma \\cdot \\epsilon \\cdot A \\cdot T^4$), enfatizando a forte dependência da temperatura ($T^4$) e da emissividade da superfície ($\\epsilon$)."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: "Um painel radiador externo da estação, com área e emissividade conhecidas, está operando a uma certa temperatura." A pergunta deve ser sobre a potência total que ele irradia para o espaço. O feedback deve mostrar a Lei de Stefan-Boltzmann em modo de exibição (</span><span class="s18">$$</span><span class="s13">P = \\sigma \\cdot \\epsilon \\cdot A \\cdot T^4</span><span class="s18">$$</span><span class="s13">) e o cálculo detalhado.`</span><span class="s16">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">'c2_hub'</span><span class="s8">:{</span><span class="s5">isHub:!</span><span class="s14">0</span><span class="s8">,</span><span class="s5">chapter</span><span class="s8">:</span><span class="s14">2</span><span class="s8">,</span><span class="s5">title</span><span class="s8">:</span><span class="s1">"Cap. 2 – O Silêncio do Vazio"</span><span class="s8">,</span><span class="s5">image</span><span class="s8">:</span><span class="s1">"https://placehold.co/800x400/2c3e50/ecf0f1?text=Antena+de+Comunicação"</span><span class="s8">,</span><span class="s5">text</span><span class="s8">:</span><span class="s1">"Com o suporte à vida estável, um novo alarme soa. O sistema de comunicação subluz está inoperante. Sem contato com o Comando Estelar, estamos isolados. Sua tarefa é diagnosticar e reparar os sistemas de ondas."</span><span class="s8">,</span><span class="s5">blocks</span><span class="s8">:[{</span><span class="s5">id</span><span class="s8">:</span><span class="s1">'b9'</span><span class="s8">,</span><span class="s5">name</span><span class="s8">:</span><span class="s1">'O Sinal Portador (Fundamentos de Ondas)'</span><span class="s8">,</span><span class="s5">startSlide</span><span class="s8">:</span><span class="s1">'c2_b9_s1'</span><span class="s8">}],</span><span class="s5">nextChapterSlide</span><span class="s8">:</span><span class="s1">'c3_hub'</span><span class="s8">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c2_b9_s1'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">2</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b9'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Diagnóstico: O Sinal Portador"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: A antena principal está dessincronizada. Para calibrá-la, precisamos definir os parâmetros corretos da onda portadora: frequência ($f$), período ($T$), comprimento de onda ($\\lambda$) e amplitude ($A$). A relação entre eles é governada pela equação fundamental $v = \\lambda \\cdot f$. Um erro aqui e o sinal se perde no vácuo."</span><span class="s16">,</span><span class="s15">nextHub</span><span class="s16">:</span><span class="s13">'c2_hub'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique a &lt;strong&gt;equação fundamental da ondulatória&lt;/strong&gt;, $v = \\lambda \\cdot f$. Descreva o que cada termo representa (velocidade, comprimento de onda, frequência) e como eles se relacionam para definir as características de uma onda de comunicação."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: "Para restabelecer a comunicação, o manual técnico especifica a frequência e o comprimento de onda da onda portadora." A pergunta deve exigir o cálculo da velocidade de propagação. O feedback deve mostrar a equação </span><span class="s18">$</span><span class="s13">v = \\lambda \\cdot f</span><span class="s18">$</span><span class="s13"> em modo de exibição e o cálculo detalhado.`</span><span class="s16">,</span><span class="s15">geminiConceptPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio CONCEITUAL com 5 opções de resposta. O cenário: "A onda de comunicação precisa passar por uma nebulosa densa, que atua como um meio diferente." A pergunta deve testar o entendimento sobre o que acontece com a frequência, o comprimento de onda e a velocidade da onda ao mudar de meio. O feedback deve explicar que a frequência se mantém constante.`</span><span class="s16">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">'c3_hub'</span><span class="s8">:{</span><span class="s5">isHub:!</span><span class="s14">0</span><span class="s8">,</span><span class="s5">chapter</span><span class="s8">:</span><span class="s14">3</span><span class="s8">,</span><span class="s5">title</span><span class="s8">:</span><span class="s1">"Cap. 3 – Perdidos nas Estrelas"</span><span class="s8">,</span><span class="s5">image</span><span class="s8">:</span><span class="s1">"https://placehold.co/800x400/9b59b6/f3e5f5?text=Sensor+de+Navegação"</span><span class="s8">,</span><span class="s5">text</span><span class="s8">:</span><span class="s1">"Comunicação restaurada, mas um novo alerta surge. O sistema de navegação óptica falhou. Estamos à deriva. Sua tarefa final é recalibrar os sensores ópticos usando as estrelas como guia."</span><span class="s8">,</span><span class="s5">blocks</span><span class="s8">:[{</span><span class="s5">id</span><span class="s8">:</span><span class="s1">'b13'</span><span class="s8">,</span><span class="s5">name</span><span class="s8">:</span><span class="s1">'Alinhamento da Lente (Refração &amp; Dispersão)'</span><span class="s8">,</span><span class="s5">startSlide</span><span class="s8">:</span><span class="s1">'c3_b13_s1'</span><span class="s8">}],</span><span class="s5">nextChapterSlide</span><span class="s8">:</span><span class="s1">'c4_epilogo'</span><span class="s8">},</span></p>
<p class="p8"><span class="s15"><span class="Apple-converted-space">            </span></span><span class="s13">'c3_b13_s1'</span><span class="s16">:{</span><span class="s15">isDiagnosis:!</span><span class="s17">0</span><span class="s16">,</span><span class="s15">chapter</span><span class="s16">:</span><span class="s17">3</span><span class="s16">,</span><span class="s15">block</span><span class="s16">:</span><span class="s13">'b13'</span><span class="s16">,</span><span class="s15">title</span><span class="s16">:</span><span class="s13">"Diagnóstico: Alinhamento da Lente"</span><span class="s16">,</span><span class="s15">text</span><span class="s16">:</span><span class="s13">"Log da I.A.: A luz da estrela guia está se desviando ao entrar nas lentes dos sensores. Esse desvio (refração) depende do material da lente. Além disso, a luz está se dispersando em cores, causando aberrações cromáticas. Em alguns cabos de fibra óptica, a luz está sendo totalmente refletida internamente, causando perda de sinal. Sua tarefa é analisar os dados do sensor para corrigir a trajetória."</span><span class="s16">,</span><span class="s15">nextHub</span><span class="s16">:</span><span class="s13">'c3_hub'</span><span class="s16">,</span><span class="s15">diaryPrompt</span><span class="s16">:</span><span class="s13">"Explique a &lt;strong&gt;Lei de Snell&lt;/strong&gt; ($n_1 \\sin(\\theta_1) = n_2 \\sin(\\theta_2)$) e o conceito de &lt;strong&gt;ângulo crítico&lt;/strong&gt; para a reflexão interna total. Detalhe como esses princípios são essenciais para o funcionamento de lentes e fibras ópticas."</span><span class="s16">,</span><span class="s15">geminiCalcPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio de CÁLCULO com 5 opções de resposta. O cenário: "Um feixe de laser de calibração entra em um bloco de material óptico desconhecido. Os sensores medem o ângulo de incidência e o ângulo de refração." A pergunta deve exigir o cálculo do índice de refração do material. O feedback deve mostrar a Lei de Snell em modo de exibição e o cálculo passo a passo.`</span><span class="s16">,</span><span class="s15">geminiConceptPrompt</span><span class="s16">:</span><span class="s13">`Você é a I.A. da Estação Aurora. Crie um desafio CONCEITUAL com 5 opções de resposta. O cenário: "Um feixe de luz está viajando do interior de um cabo de fibra óptica (com alto índice de refração) para o seu revestimento (com baixo índice de refração)." A pergunta deve ser sobre o que acontece com o feixe de luz se o ângulo de incidência exceder o ângulo crítico. O feedback deve explicar o fenômeno da reflexão interna total.`</span><span class="s16">},</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s1">'c4_epilogo'</span><span class="s8">:{</span><span class="s5">title</span><span class="s8">:</span><span class="s1">"Epílogo: O Caminho de Casa"</span><span class="s8">,</span><span class="s5">image</span><span class="s8">:</span><span class="s1">"https://placehold.co/800x400/f1c40f/2c3e50?text=Estação+Aurora+Salva"</span><span class="s8">,</span><span class="s5">text</span><span class="s8">:</span><span class="s1">`Com todos os sistemas reparados, o mapa estelar se encaixa perfeitamente na tela de navegação. A rota de volta para casa está traçada. A Comandante Rostova coloca a mão em seu ombro.&lt;br&gt;— Você fez o impossível, Cadete. Você salvou a todos nós. Sua perícia em física transformou uma catástrofe certa em nosso retorno seguro.&lt;br&gt;&lt;br&gt;&lt;h3 class="text-2xl text-cyan-300 font-orbitron text-center mt-4"&gt;🏆 Conquista Desbloqueada: Engenheiro(a) Chefe da Aurora 🏆&lt;/h3&gt;`</span><span class="s8">,</span><span class="s5">choices</span><span class="s8">:[]}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// --- LÓGICA DO JOGO ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> currentSlideId </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'1'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> currentQuestionData </span><span class="s8">=</span><span class="s1"> </span><span class="s12">null</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> score </span><span class="s8">=</span><span class="s1"> </span><span class="s14">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> progress </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>c1</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> b3</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b4</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b5</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b6</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>c2</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> b9</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b10</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b11</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>c3</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> b13</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> slideContentEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'slide-content'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> imageContainerEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'slide-image-container'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> textContainerEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'slide-text-container'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> choicesContainerEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'slide-choices-container'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> geminiOutputContainerEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'gemini-output-container'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> resetBtn </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'reset-btn'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> scoreDisplayEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'score-display'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> enemModalEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'enem-modal'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> enemConfirmBtn </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'enem-confirm-btn'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> enemCancelBtn </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'enem-cancel-btn'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> videoModalEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'video-modal'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> videoGridEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'video-grid'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> videoCloseBtn </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'video-close-btn'</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>resetBtn</span><span class="s8">.</span><span class="s1">onclick </span><span class="s8">=</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>progress </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>c1</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> b3</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b4</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b5</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b6</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>c2</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> b9</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b10</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> b11</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>c3</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> b13</span><span class="s8">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>score </span><span class="s8">=</span><span class="s1"> </span><span class="s14">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>renderSlide</span><span class="s8">(</span><span class="s9">'1'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> updateScore</span><span class="s8">(</span><span class="s1">points</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>score </span><span class="s8">+=</span><span class="s1"> points</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>scoreDisplayEl</span><span class="s8">.</span><span class="s1">textContent </span><span class="s8">=</span><span class="s1"> </span><span class="s9">`PONTUAÇÃO: </span><span class="s8">${</span><span class="s1">score</span><span class="s8">}</span><span class="s9">`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> shuffleArray</span><span class="s8">(</span><span class="s1">array</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">for</span><span class="s1"> </span><span class="s8">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s8">=</span><span class="s1"> array</span><span class="s8">.</span><span class="s1">length </span><span class="s8">-</span><span class="s1"> </span><span class="s14">1</span><span class="s8">;</span><span class="s1"> i </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">--)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> j </span><span class="s8">=</span><span class="s1"> </span><span class="s7">Math</span><span class="s8">.</span><span class="s1">floor</span><span class="s8">(</span><span class="s7">Math</span><span class="s8">.</span><span class="s1">random</span><span class="s8">()</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s1">i </span><span class="s8">+</span><span class="s1"> </span><span class="s14">1</span><span class="s8">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">[</span><span class="s1">array</span><span class="s8">[</span><span class="s1">i</span><span class="s8">],</span><span class="s1"> array</span><span class="s8">[</span><span class="s1">j</span><span class="s8">]]</span><span class="s1"> </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[</span><span class="s1">array</span><span class="s8">[</span><span class="s1">j</span><span class="s8">],</span><span class="s1"> array</span><span class="s8">[</span><span class="s1">i</span><span class="s8">]];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> createButton</span><span class="s8">(</span><span class="s1">text</span><span class="s8">,</span><span class="s1"> onClick</span><span class="s8">,</span><span class="s1"> className</span><span class="s8">,</span><span class="s1"> disabled </span><span class="s8">=</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> tooltip </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> button </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'button'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s5">className </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`action-button w-full text-left font-bold py-3 px-5 rounded-md </span><span class="s8">${</span><span class="s5">className</span><span class="s8">}</span><span class="s1">`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> text</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s1">onclick </span><span class="s8">=</span><span class="s1"> onClick</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s1">title </span><span class="s8">=</span><span class="s1"> tooltip</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s1">disabled </span><span class="s8">=</span><span class="s1"> disabled</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s8">(</span><span class="s1">disabled</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>button</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'opacity-50'</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'cursor-not-allowed'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">return</span><span class="s1"> button</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> callGeminiApi</span><span class="s8">(</span><span class="s1">prompt</span><span class="s8">,</span><span class="s1"> button</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>geminiOutputContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> originalButtonText </span><span class="s8">=</span><span class="s1"> button</span><span class="s8">.</span><span class="s1">innerHTML</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s1">disabled </span><span class="s8">=</span><span class="s1"> </span><span class="s12">true</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>button</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">'&lt;div class="flex items-center justify-center"&gt;&lt;div class="loader"&gt;&lt;/div&gt;&lt;span&gt;Processando...&lt;/span&gt;&lt;/div&gt;'</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> apiKey </span><span class="s8">=</span><span class="s1"> </span><span class="s9">""</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s5"> apiUrl </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=</span><span class="s8">${</span><span class="s5">apiKey</span><span class="s8">}</span><span class="s1">`</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> payload </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> contents</span><span class="s8">:</span><span class="s1"> </span><span class="s8">[{</span><span class="s1"> role</span><span class="s8">:</span><span class="s1"> </span><span class="s9">"user"</span><span class="s8">,</span><span class="s1"> parts</span><span class="s8">:</span><span class="s1"> </span><span class="s8">[{</span><span class="s1"> text</span><span class="s8">:</span><span class="s1"> prompt </span><span class="s8">}]</span><span class="s1"> </span><span class="s8">}]</span><span class="s1"> </span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">try</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> response </span><span class="s8">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> fetch</span><span class="s8">(</span><span class="s1">apiUrl</span><span class="s8">,</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>method</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'POST'</span><span class="s8">,</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>headers</span><span class="s8">:</span><span class="s5"> </span><span class="s8">{</span><span class="s5"> </span><span class="s1">'Content-Type'</span><span class="s8">:</span><span class="s5"> </span><span class="s1">'application/json'</span><span class="s5"> </span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>body</span><span class="s8">:</span><span class="s1"> </span><span class="s7">JSON</span><span class="s8">.</span><span class="s1">stringify</span><span class="s8">(</span><span class="s1">payload</span><span class="s8">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">});</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">response</span><span class="s8">.</span><span class="s1">ok</span><span class="s8">)</span><span class="s1"> </span><span class="s12">throw</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s7">Error</span><span class="s8">(</span><span class="s9">`API Error: </span><span class="s8">${</span><span class="s1">response</span><span class="s8">.</span><span class="s1">statusText</span><span class="s8">}</span><span class="s9">`</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> result </span><span class="s8">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> response</span><span class="s8">.</span><span class="s1">json</span><span class="s8">();</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s12">let</span><span class="s5"> text </span><span class="s8">=</span><span class="s5"> </span><span class="s1">"Ocorreu uma interferência na comunicação com a I.A. Tente novamente."</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">result</span><span class="s8">.</span><span class="s1">candidates</span><span class="s8">?.[</span><span class="s14">0</span><span class="s8">]?.</span><span class="s1">content</span><span class="s8">?.</span><span class="s1">parts</span><span class="s8">?.[</span><span class="s14">0</span><span class="s8">]?.</span><span class="s1">text</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>text </span><span class="s8">=</span><span class="s1"> result</span><span class="s8">.</span><span class="s1">candidates</span><span class="s8">[</span><span class="s14">0</span><span class="s8">].</span><span class="s1">content</span><span class="s8">.</span><span class="s1">parts</span><span class="s8">[</span><span class="s14">0</span><span class="s8">].</span><span class="s1">text</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>geminiOutputContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">`&lt;div class="gemini-response"&gt;</span><span class="s8">${</span><span class="s1">text</span><span class="s8">.</span><span class="s1">replace</span><span class="s8">(</span><span class="s19">/\n/</span><span class="s12">g</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'&lt;br&gt;'</span><span class="s8">)}</span><span class="s9">&lt;/div&gt;`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">window</span><span class="s8">.</span><span class="s7">MathJax</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s7">MathJax</span><span class="s8">.</span><span class="s1">typeset</span><span class="s8">([</span><span class="s1">geminiOutputContainerEl</span><span class="s8">]);</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">catch</span><span class="s1"> </span><span class="s8">(</span><span class="s1">error</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s8">.</span><span class="s1">error</span><span class="s8">(</span><span class="s9">"Gemini API call failed:"</span><span class="s8">,</span><span class="s1"> error</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>geminiOutputContainerEl</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`&lt;div class="gemini-response text-red-400"&gt;Falha crítica na conexão com a I.A. Central. Verifique os protocolos de comunicação (console).&lt;/div&gt;`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">finally</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                 </span>button</span><span class="s8">.</span><span class="s1">disabled </span><span class="s8">=</span><span class="s1"> </span><span class="s12">false</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                 </span>button</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> originalButtonText</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> generateDynamicQuestion</span><span class="s8">(</span><span class="s1">slide</span><span class="s8">,</span><span class="s1"> difficulty </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'standard'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> promptTypes </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">geminiCalcPrompt</span><span class="s8">)</span><span class="s1"> promptTypes</span><span class="s8">.</span><span class="s1">push</span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">geminiCalcPrompt</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">geminiConceptPrompt</span><span class="s8">)</span><span class="s1"> promptTypes</span><span class="s8">.</span><span class="s1">push</span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">geminiConceptPrompt</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">promptTypes</span><span class="s8">.</span><span class="s1">length </span><span class="s8">===</span><span class="s1"> </span><span class="s14">0</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>console</span><span class="s8">.</span><span class="s5">error</span><span class="s8">(</span><span class="s1">"No AI question prompts found for this slide:"</span><span class="s8">,</span><span class="s5"> slide</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s5"> </span><span class="s8">{</span><span class="s5"> </span><span class="s8">...</span><span class="s5">slide</span><span class="s8">,</span><span class="s5"> question</span><span class="s8">:</span><span class="s5"> </span><span class="s1">"Erro de configuração do slide: nenhum prompt de questão encontrado."</span><span class="s8">,</span><span class="s5"> answers</span><span class="s8">:</span><span class="s5"> </span><span class="s8">[]</span><span class="s5"> </span><span class="s8">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> basePrompt </span><span class="s8">=</span><span class="s1"> promptTypes</span><span class="s8">[</span><span class="s7">Math</span><span class="s8">.</span><span class="s1">floor</span><span class="s8">(</span><span class="s7">Math</span><span class="s8">.</span><span class="s1">random</span><span class="s8">()</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> promptTypes</span><span class="s8">.</span><span class="s1">length</span><span class="s8">)];</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> difficultyInstruction </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">switch</span><span class="s1"> </span><span class="s8">(</span><span class="s1">difficulty</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s1"> </span><span class="s9">'easier'</span><span class="s8">:</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>difficultyInstruction </span><span class="s8">=</span><span class="s5"> </span><span class="s1">' Gere uma variação NOVA e MAIS FÁCIL desta questão. Simplifique o contexto e use números inteiros ou fáceis de calcular. O foco é no conceito principal, sem distrações.'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s1"> </span><span class="s9">'harder'</span><span class="s8">:</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>difficultyInstruction </span><span class="s8">=</span><span class="s5"> </span><span class="s1">' Gere uma variação NOVA e MAIS DIFÍCIL desta questão. Adicione um passo extra no raciocínio, use números mais complexos (decimais, por exemplo) ou introduza um detalhe contextual que precise ser interpretado antes de resolver o problema.'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">default</span><span class="s8">:</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>difficultyInstruction </span><span class="s8">=</span><span class="s5"> </span><span class="s1">' Crie uma questão desafiadora que se encaixe perfeitamente neste cenário. Se for uma nova tentativa, gere uma variação inédita.'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">break</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s5"> finalPrompt </span><span class="s8">=</span><span class="s5"> basePrompt </span><span class="s8">+</span><span class="s5"> </span><span class="s1">" "</span><span class="s5"> </span><span class="s8">+</span><span class="s5"> difficultyInstruction </span><span class="s8">+</span><span class="s5"> </span><span class="s1">" **REGRA FINAL: Retorne APENAS um objeto JSON válido, sem nenhum texto ou formatação adicional fora do JSON.**"</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> apiKey </span><span class="s8">=</span><span class="s1"> </span><span class="s9">""</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s5"> apiUrl </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=</span><span class="s8">${</span><span class="s5">apiKey</span><span class="s8">}</span><span class="s1">`</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> payload </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>contents</span><span class="s8">:</span><span class="s1"> </span><span class="s8">[{</span><span class="s1"> role</span><span class="s8">:</span><span class="s1"> </span><span class="s9">"user"</span><span class="s8">,</span><span class="s1"> parts</span><span class="s8">:</span><span class="s1"> </span><span class="s8">[{</span><span class="s1"> text</span><span class="s8">:</span><span class="s1"> finalPrompt </span><span class="s8">}]</span><span class="s1"> </span><span class="s8">}],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">try</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> response </span><span class="s8">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> fetch</span><span class="s8">(</span><span class="s1">apiUrl</span><span class="s8">,</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>method</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'POST'</span><span class="s8">,</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>headers</span><span class="s8">:</span><span class="s5"> </span><span class="s8">{</span><span class="s5"> </span><span class="s1">'Content-Type'</span><span class="s8">:</span><span class="s5"> </span><span class="s1">'application/json'</span><span class="s5"> </span><span class="s8">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>body</span><span class="s8">:</span><span class="s1"> </span><span class="s7">JSON</span><span class="s8">.</span><span class="s1">stringify</span><span class="s8">(</span><span class="s1">payload</span><span class="s8">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">response</span><span class="s8">.</span><span class="s1">ok</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> errorBody </span><span class="s8">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> response</span><span class="s8">.</span><span class="s1">text</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">throw</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s7">Error</span><span class="s8">(</span><span class="s9">`API response not OK: </span><span class="s8">${</span><span class="s1">response</span><span class="s8">.</span><span class="s1">status</span><span class="s8">}</span><span class="s9"> </span><span class="s8">${</span><span class="s1">response</span><span class="s8">.</span><span class="s1">statusText</span><span class="s8">}</span><span class="s9">. Body: </span><span class="s8">${</span><span class="s1">errorBody</span><span class="s8">}</span><span class="s9">`</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> result </span><span class="s8">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> response</span><span class="s8">.</span><span class="s1">json</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">let</span><span class="s1"> jsonString </span><span class="s8">=</span><span class="s1"> result</span><span class="s8">.</span><span class="s1">candidates</span><span class="s8">?.[</span><span class="s14">0</span><span class="s8">]?.</span><span class="s1">content</span><span class="s8">?.</span><span class="s1">parts</span><span class="s8">?.[</span><span class="s14">0</span><span class="s8">]?.</span><span class="s1">text</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">jsonString</span><span class="s8">)</span><span class="s1"> </span><span class="s12">throw</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s7">Error</span><span class="s8">(</span><span class="s9">'No text in API response'</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> jsonRegex </span><span class="s8">=</span><span class="s1"> </span><span class="s19">/```json\s*([\s\S]*?)\s*```/</span><span class="s12">s</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> match </span><span class="s8">=</span><span class="s1"> jsonString</span><span class="s8">.</span><span class="s1">match</span><span class="s8">(</span><span class="s1">jsonRegex</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">match</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>jsonString </span><span class="s8">=</span><span class="s1"> match</span><span class="s8">[</span><span class="s14">1</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> parsedData </span><span class="s8">=</span><span class="s1"> </span><span class="s7">JSON</span><span class="s8">.</span><span class="s1">parse</span><span class="s8">(</span><span class="s1">jsonString</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">parsedData</span><span class="s8">.</span><span class="s1">answers </span><span class="s8">||</span><span class="s1"> </span><span class="s8">!</span><span class="s1">parsedData</span><span class="s8">.</span><span class="s1">answers</span><span class="s8">.</span><span class="s1">some</span><span class="s8">(</span><span class="s1">a </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s12">typeof</span><span class="s1"> a</span><span class="s8">.</span><span class="s1">correct </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'boolean'</span><span class="s8">))</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s12">throw</span><span class="s5"> </span><span class="s12">new</span><span class="s5"> </span><span class="s7">Error</span><span class="s8">(</span><span class="s1">"Invalid question format from API: 'correct' property is missing or malformed."</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>shuffleArray</span><span class="s8">(</span><span class="s1">parsedData</span><span class="s8">.</span><span class="s1">answers</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s8">...</span><span class="s1">slide</span><span class="s8">,</span><span class="s1"> </span><span class="s8">...</span><span class="s1">parsedData </span><span class="s8">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">catch</span><span class="s1"> </span><span class="s8">(</span><span class="s1">error</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>console</span><span class="s8">.</span><span class="s5">error</span><span class="s8">(</span><span class="s1">"Failed to generate dynamic question, using fallback."</span><span class="s8">,</span><span class="s5"> error</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"Payload sent:"</span><span class="s8">,</span><span class="s5"> </span><span class="s7">JSON</span><span class="s8">.</span><span class="s5">stringify</span><span class="s8">(</span><span class="s5">payload</span><span class="s8">,</span><span class="s5"> </span><span class="s12">null</span><span class="s8">,</span><span class="s5"> </span><span class="s14">2</span><span class="s8">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> fallbackSlide </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s8">...</span><span class="s1">slide </span><span class="s8">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>fallbackSlide</span><span class="s8">.</span><span class="s1">question </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"Erro na geração de diagnóstico."</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>fallbackSlide</span><span class="s8">.</span><span class="s1">answers </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[];</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>fallbackSlide</span><span class="s8">.</span><span class="s5">text </span><span class="s8">+=</span><span class="s5"> </span><span class="s1">"&lt;br&gt;&lt;div class='feedback feedback-incorrect'&gt;A I.A. não conseguiu gerar um problema válido. A conexão pode estar instável. Tente reiniciar a missão.&lt;/div&gt;"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>fallbackSlide</span><span class="s8">.</span><span class="s1">choices </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[{</span><span class="s1"> text</span><span class="s8">:</span><span class="s1"> </span><span class="s9">"Reiniciar Missão"</span><span class="s8">,</span><span class="s1"> nextSlide</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'1'</span><span class="s1"> </span><span class="s8">}];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">delete</span><span class="s1"> fallbackSlide</span><span class="s8">.</span><span class="s1">nextChoices</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s1"> fallbackSlide</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> renderSlide</span><span class="s8">(</span><span class="s1">slideId</span><span class="s8">,</span><span class="s1"> difficulty </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'standard'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> slide </span><span class="s8">=</span><span class="s1"> storyData</span><span class="s8">[</span><span class="s1">slideId</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">slide</span><span class="s8">)</span><span class="s1"> </span><span class="s12">return</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentSlideId </span><span class="s8">=</span><span class="s1"> slideId</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>updateScore</span><span class="s8">(</span><span class="s14">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>geminiOutputContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>slideContentEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'visible'</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout</span><span class="s8">(</span><span class="s12">async</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">image</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span>imageContainerEl</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`&lt;img src="</span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">image</span><span class="s8">}</span><span class="s1">" alt="</span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">title</span><span class="s8">}</span><span class="s1">" class="w-full h-auto max-h-80 object-cover rounded-lg shadow-lg border-2 border-black/20"&gt;`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>imageContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> textContainer </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>textContainer</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`&lt;h2 class="text-3xl md:text-4xl font-bold text-cyan-300 mb-4 font-orbitron"&gt;</span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">title</span><span class="s8">}</span><span class="s1">&lt;/h2&gt;&lt;div class="text-gray-300 text-base md:text-lg leading-relaxed"&gt;</span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">text</span><span class="s8">}</span><span class="s1">&lt;/div&gt;`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>textContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>textContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">textContainer</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">isHub</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> chapterProgress </span><span class="s8">=</span><span class="s1"> progress</span><span class="s8">[</span><span class="s9">`c</span><span class="s8">${</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">chapter</span><span class="s8">}</span><span class="s9">`</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">let</span><span class="s1"> allBlocksComplete </span><span class="s8">=</span><span class="s1"> </span><span class="s12">true</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>slide</span><span class="s8">.</span><span class="s1">blocks</span><span class="s8">.</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">block </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> isComplete </span><span class="s8">=</span><span class="s1"> chapterProgress</span><span class="s8">[</span><span class="s1">block</span><span class="s8">.</span><span class="s1">id</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> buttonText </span><span class="s8">=</span><span class="s1"> isComplete </span><span class="s8">?</span><span class="s1"> </span><span class="s9">`</span><span class="s8">${</span><span class="s1">block</span><span class="s8">.</span><span class="s1">name</span><span class="s8">}</span><span class="s9"> &lt;span class="text-green-400 ml-2"&gt;✓&lt;/span&gt;`</span><span class="s1"> </span><span class="s8">:</span><span class="s1"> block</span><span class="s8">.</span><span class="s1">name</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> button </span><span class="s8">=</span><span class="s1"> createButton</span><span class="s8">(</span><span class="s1">buttonText</span><span class="s8">,</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> renderSlide</span><span class="s8">(</span><span class="s1">block</span><span class="s8">.</span><span class="s1">startSlide</span><span class="s8">),</span><span class="s1"> </span><span class="s9">'bg-blue-800 hover:bg-blue-700 text-gray-100 border-blue-900'</span><span class="s8">,</span><span class="s1"> isComplete</span><span class="s8">,</span><span class="s1"> </span><span class="s9">`Iniciar diagnóstico para o bloco: </span><span class="s8">${</span><span class="s1">block</span><span class="s8">.</span><span class="s1">name</span><span class="s8">}</span><span class="s9">`</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">button</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">isComplete</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>allBlocksComplete </span><span class="s8">=</span><span class="s1"> </span><span class="s12">false</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">});</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">allBlocksComplete </span><span class="s8">&amp;&amp;</span><span class="s1"> slide</span><span class="s8">.</span><span class="s1">nextChapterSlide</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                         </span></span><span class="s12">const</span><span class="s5"> advanceButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">`Avançar para o </span><span class="s8">${</span><span class="s5">storyData</span><span class="s8">[</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">nextChapterSlide</span><span class="s8">].</span><span class="s5">title</span><span class="s8">}</span><span class="s1">`</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> renderSlide</span><span class="s8">(</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">nextChapterSlide</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'bg-green-600 hover:bg-green-500 text-white border-green-800 mt-6'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Prosseguir para o próximo capítulo da missão.'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                         </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">advanceButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">isDiagnosis</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                     </span>choicesContainerEl</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">'&lt;div class="text-cyan-300 flex items-center w-full justify-center py-4"&gt;&lt;div class="loader"&gt;&lt;/div&gt;Gerando diagnóstico...&lt;/div&gt;'</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> dynamicSlide </span><span class="s8">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> generateDynamicQuestion</span><span class="s8">(</span><span class="s1">slide</span><span class="s8">,</span><span class="s1"> difficulty</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>currentQuestionData </span><span class="s8">=</span><span class="s1"> dynamicSlide</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">dynamicSlide</span><span class="s8">.</span><span class="s1">answers </span><span class="s8">&amp;&amp;</span><span class="s1"> dynamicSlide</span><span class="s8">.</span><span class="s1">answers</span><span class="s8">.</span><span class="s1">length </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> questionContainer </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>questionContainer</span><span class="s8">.</span><span class="s1">className </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'mt-6'</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">dynamicSlide</span><span class="s8">.</span><span class="s1">questionHTML</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>questionContainer</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> dynamicSlide</span><span class="s8">.</span><span class="s1">questionHTML</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">dynamicSlide</span><span class="s8">.</span><span class="s1">question</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>questionContainer</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">`&lt;p class='font-bold text-cyan-200 text-lg'&gt;</span><span class="s8">${</span><span class="s1">dynamicSlide</span><span class="s8">.</span><span class="s1">question</span><span class="s8">}</span><span class="s9">&lt;/p&gt;`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>textContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">questionContainer</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> answerButtonsContainer </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>answerButtonsContainer</span><span class="s8">.</span><span class="s1">className </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'mt-6 space-y-3'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>dynamicSlide</span><span class="s8">.</span><span class="s1">answers</span><span class="s8">.</span><span class="s1">forEach</span><span class="s8">((</span><span class="s1">answer</span><span class="s8">,</span><span class="s1"> index</span><span class="s8">)</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s1"> letter </span><span class="s8">=</span><span class="s1"> </span><span class="s7">String</span><span class="s8">.</span><span class="s1">fromCharCode</span><span class="s8">(</span><span class="s14">65</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> index</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s1"> buttonText </span><span class="s8">=</span><span class="s1"> </span><span class="s9">`&lt;span class="font-bold mr-3"&gt;</span><span class="s8">${</span><span class="s1">letter</span><span class="s8">}</span><span class="s9">)&lt;/span&gt; </span><span class="s8">${</span><span class="s1">answer</span><span class="s8">.</span><span class="s1">text</span><span class="s8">}</span><span class="s9">`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s1"> button </span><span class="s8">=</span><span class="s1"> createButton</span><span class="s8">(</span><span class="s1">buttonText</span><span class="s8">,</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> handleAnswer</span><span class="s8">(</span><span class="s1">answer</span><span class="s8">,</span><span class="s1"> dynamicSlide</span><span class="s8">),</span><span class="s1"> </span><span class="s9">'bg-blue-800 hover:bg-blue-700 text-gray-100 border-blue-900'</span><span class="s8">,</span><span class="s1"> </span><span class="s12">false</span><span class="s8">,</span><span class="s1"> </span><span class="s9">`Selecionar alternativa </span><span class="s8">${</span><span class="s1">letter</span><span class="s8">}</span><span class="s9">`</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>answerButtonsContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">button</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">answerButtonsContainer</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> helpButtonsContainer </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span>helpButtonsContainer</span><span class="s8">.</span><span class="s5">className </span><span class="s8">=</span><span class="s5"> </span><span class="s1">"w-full grid grid-cols-1 sm:grid-cols-2 gap-2 mt-6 border-t border-gray-700 pt-4"</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s5"> commanderPrompt </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`Você é a Comandante Eva Rostova, orientando o cadete. Para o problema atual, descreva a estratégia de resolução de forma direta e eficiente. Apresente as etapas lógicas e as fórmulas necessárias em sua forma geral, **sem substituir os valores numéricos**. **Toda fórmula deve estar em modo de exibição (</span><span class="s20">$$</span><span class="s1">fórmula</span><span class="s20">$$</span><span class="s1">) e centralizada. Variáveis individuais no texto devem usar o modo inline (</span><span class="s20">$</span><span class="s1">símbolo</span><span class="s20">$</span><span class="s1">).** O objetivo é guiar o raciocínio, não dar a resposta. Questão: "</span><span class="s8">${</span><span class="s5">dynamicSlide</span><span class="s8">.</span><span class="s5">question </span><span class="s8">||</span><span class="s5"> dynamicSlide</span><span class="s8">.</span><span class="s5">questionHTML</span><span class="s8">}</span><span class="s1">"`</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s5"> commanderButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Verificar com o comandante'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">(</span><span class="s5">e</span><span class="s8">)</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> callGeminiApi</span><span class="s8">(</span><span class="s5">commanderPrompt</span><span class="s8">,</span><span class="s5"> e</span><span class="s8">.</span><span class="s5">currentTarget</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'gemini-button justify-center bg-teal-600 hover:bg-teal-500 text-white border-teal-800'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Recebe uma orientação estratégica da Comandante, com as fórmulas e o passo a passo para a resolução.'</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">dynamicSlide</span><span class="s8">.</span><span class="s1">diaryPrompt</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s5"> diaryPrompt </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`Você é a I.A. da Estação Aurora. Crie uma entrada para o diário de bordo do cadete. **Formato estrito:** Comece com um cabeçalho futurista (ex: "Registro de Bordo: Data Estelar 74136.2, Ano 3125") e prossiga com um texto narrativo e explicativo. **NÃO use markdown, especialmente asteriscos para listas.** Para destacar termos, use a tag HTML &lt;strong&gt;.&lt;/strong&gt; Explique os conceitos físicos de forma detalhada. **Apenas equações completas devem ser centralizadas em modo de exibição (</span><span class="s20">$$</span><span class="s1">fórmula</span><span class="s20">$$</span><span class="s1">). Variáveis e símbolos individuais devem usar o modo inline (</span><span class="s20">$</span><span class="s1">símbolo</span><span class="s20">$</span><span class="s1">).** Tópico: </span><span class="s8">${</span><span class="s5">dynamicSlide</span><span class="s8">.</span><span class="s5">diaryPrompt</span><span class="s8">}</span><span class="s1">`</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s5"> diaryButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Consultar o diário de bordo'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">(</span><span class="s5">e</span><span class="s8">)</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> callGeminiApi</span><span class="s8">(</span><span class="s5">diaryPrompt</span><span class="s8">,</span><span class="s5"> e</span><span class="s8">.</span><span class="s5">currentTarget</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'gemini-button justify-center bg-pink-600 hover:bg-pink-500 text-white border-pink-800'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Acessa uma explicação teórica detalhada sobre os conceitos físicos do desafio.'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>helpButtonsContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">diaryButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>helpButtonsContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">commanderButton</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s5"> enemButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Aplicar protocolo E.N.E.M'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> showEnemConfirmation</span><span class="s8">(</span><span class="s5">slideId</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'gemini-button justify-center bg-yellow-500 hover:bg-yellow-400 text-black border-yellow-700'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Acessa o terminal de treinamento avançado com desafios de missões anteriores.'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s5"> videoButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Banco de Imagens Primitivas'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> showVideoModal</span><span class="s8">(</span><span class="s5">slide</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'gemini-button justify-center bg-red-600 hover:bg-red-500 text-white border-red-800'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Busca no arquivo do Comando Estelar por briefings visuais (vídeos) sobre o tema.'</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">helpButtonsContainer</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> extraHelpContainer </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>extraHelpContainer</span><span class="s8">.</span><span class="s1">className </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"w-full grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>extraHelpContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">enemButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>extraHelpContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">videoButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">extraHelpContainer</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">choices</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>slide</span><span class="s8">.</span><span class="s1">choices</span><span class="s8">.</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">choice </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s5"> button </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s5">choice</span><span class="s8">.</span><span class="s5">text</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> renderSlide</span><span class="s8">(</span><span class="s5">choice</span><span class="s8">.</span><span class="s5">nextSlide</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'justify-center bg-indigo-700 hover:bg-indigo-600 text-gray-100 font-bold py-3 px-5 rounded-md border-indigo-900'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Avançar na história.'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">button</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">window</span><span class="s8">.</span><span class="s7">MathJax</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                     </span></span><span class="s7">MathJax</span><span class="s8">.</span><span class="s1">typesetPromise</span><span class="s8">([</span><span class="s1">textContainerEl</span><span class="s8">,</span><span class="s1"> choicesContainerEl</span><span class="s8">]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>slideContentEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'visible'</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">},</span><span class="s1"> </span><span class="s14">500</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> handleAnswer</span><span class="s8">(</span><span class="s1">answer</span><span class="s8">,</span><span class="s1"> slide</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s12">typeof</span><span class="s1"> answer</span><span class="s8">.</span><span class="s1">correct </span><span class="s8">!==</span><span class="s1"> </span><span class="s9">'boolean'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>console</span><span class="s8">.</span><span class="s5">error</span><span class="s8">(</span><span class="s1">"Answer object is malformed, 'correct' property is not a boolean:"</span><span class="s8">,</span><span class="s5"> answer</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>geminiOutputContainerEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> feedbackContainer </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> feedbackEl </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> feedbackActions </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">createElement</span><span class="s8">(</span><span class="s9">'div'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>feedbackActions</span><span class="s8">.</span><span class="s5">className </span><span class="s8">=</span><span class="s5"> </span><span class="s1">'mt-4 flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4'</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> feedbackClass </span><span class="s8">=</span><span class="s1"> </span><span class="s9">''</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">answer</span><span class="s8">.</span><span class="s1">correct</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updateScore</span><span class="s8">(</span><span class="s14">10</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>feedbackEl</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`&lt;strong class='font-orbitron text-green-300'&gt;SISTEMA CORRIGIDO:&lt;/strong&gt; </span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">correctFeedback</span><span class="s8">}</span><span class="s1">`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>feedbackClass </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'feedback-correct'</span><span class="s8">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">nextSlideInBlock</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s5"> nextButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Próximo Diagnóstico'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> renderSlide</span><span class="s8">(</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">nextSlideInBlock</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'justify-center bg-green-600 hover:bg-green-500 text-white border-green-800 mt-4'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Prosseguir para a próxima etapa do diagnóstico.'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">nextButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">isDiagnosis</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>progress</span><span class="s8">[</span><span class="s9">`c</span><span class="s8">${</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">chapter</span><span class="s8">}</span><span class="s9">`</span><span class="s8">][</span><span class="s1">slide</span><span class="s8">.</span><span class="s1">block</span><span class="s8">]</span><span class="s1"> </span><span class="s8">=</span><span class="s1"> </span><span class="s12">true</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s5"> backToHubButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Retornar ao Painel de Diagnóstico'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> renderSlide</span><span class="s8">(</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">nextHub</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'justify-center bg-indigo-700 hover:bg-indigo-600 text-gray-100 font-bold py-3 px-5 rounded-md border-indigo-900 mt-4'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Retornar ao painel principal para selecionar uma nova tarefa.'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>choicesContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">backToHubButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updateScore</span><span class="s8">(-</span><span class="s14">10</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span>feedbackEl</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`&lt;strong class='font-orbitron text-red-300'&gt;FALHA NA CALIBRAÇÃO:&lt;/strong&gt; </span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">incorrectFeedback</span><span class="s8">}</span><span class="s1">`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>feedbackClass </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'feedback-incorrect'</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s5"> easierBtn </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Tentar com simulação mais fácil'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> renderSlide</span><span class="s8">(</span><span class="s5">currentSlideId</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'easier'</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'justify-center bg-red-600 hover:bg-red-500 text-white border-red-800'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Gera uma nova versão do desafio com complexidade reduzida.'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s5"> commanderPrompt </span><span class="s8">=</span><span class="s5"> </span><span class="s1">`Você é a Comandante Eva Rostova, orientando o cadete. Para o problema atual, descreva a estratégia de resolução de forma direta e eficiente. Apresente as etapas lógicas e as fórmulas necessárias em sua forma geral, **sem substituir os valores numéricos**. **Toda fórmula deve estar em modo de exibição (</span><span class="s20">$$</span><span class="s1">fórmula</span><span class="s20">$$</span><span class="s1">) e centralizada. Variáveis individuais no texto devem usar o modo inline (</span><span class="s20">$</span><span class="s1">símbolo</span><span class="s20">$</span><span class="s1">).** O objetivo é guiar o raciocínio, não dar a resposta. Questão: "</span><span class="s8">${</span><span class="s5">slide</span><span class="s8">.</span><span class="s5">question </span><span class="s8">||</span><span class="s5"> </span><span class="s1">'descrita na imagem'</span><span class="s8">}</span><span class="s1">"`</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s5"> commanderButton </span><span class="s8">=</span><span class="s5"> createButton</span><span class="s8">(</span><span class="s1">'Verificar com o comandante'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">(</span><span class="s5">e</span><span class="s8">)</span><span class="s5"> </span><span class="s8">=&gt;</span><span class="s5"> callGeminiApi</span><span class="s8">(</span><span class="s5">commanderPrompt</span><span class="s8">,</span><span class="s5"> e</span><span class="s8">.</span><span class="s5">currentTarget</span><span class="s8">),</span><span class="s5"> </span><span class="s1">'gemini-button justify-center bg-teal-600 hover:bg-teal-500 text-white border-teal-800'</span><span class="s8">,</span><span class="s5"> </span><span class="s12">false</span><span class="s8">,</span><span class="s5"> </span><span class="s1">'Recebe uma orientação estratégica da Comandante, com as fórmulas e o passo a passo para a resolução.'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>feedbackActions</span><span class="s8">.</span><span class="s1">append</span><span class="s8">(</span><span class="s1">easierBtn</span><span class="s8">,</span><span class="s1"> commanderButton</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>feedbackEl</span><span class="s8">.</span><span class="s1">className </span><span class="s8">=</span><span class="s1"> </span><span class="s9">`feedback </span><span class="s8">${</span><span class="s1">feedbackClass</span><span class="s8">}</span><span class="s9">`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>feedbackContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">feedbackEl</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>feedbackContainer</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">feedbackActions</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> oldFeedback </span><span class="s8">=</span><span class="s1"> textContainerEl</span><span class="s8">.</span><span class="s1">querySelector</span><span class="s8">(</span><span class="s9">'.feedback'</span><span class="s8">)?.</span><span class="s1">parentElement</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s8">(</span><span class="s1">oldFeedback</span><span class="s8">)</span><span class="s1"> oldFeedback</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">();</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>textContainerEl</span><span class="s8">.</span><span class="s1">appendChild</span><span class="s8">(</span><span class="s1">feedbackContainer</span><span class="s8">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">window</span><span class="s8">.</span><span class="s7">MathJax</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">MathJax</span><span class="s8">.</span><span class="s1">typesetPromise</span><span class="s8">([</span><span class="s1">feedbackContainer</span><span class="s8">]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Lógica dos Modais ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> returnSlideId </span><span class="s8">=</span><span class="s1"> </span><span class="s12">null</span><span class="s8">;</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> showEnemConfirmation</span><span class="s8">(</span><span class="s1">slideId</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>returnSlideId </span><span class="s8">=</span><span class="s1"> slideId</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>enemModalEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>enemConfirmBtn</span><span class="s8">.</span><span class="s1">onclick </span><span class="s8">=</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>enemModalEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">            </span>alert</span><span class="s8">(</span><span class="s1">"Protocolo E.N.E.M. ativado! (Funcionalidade a ser implementada)"</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>enemCancelBtn</span><span class="s8">.</span><span class="s1">onclick </span><span class="s8">=</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>enemModalEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> showVideoModal</span><span class="s8">(</span><span class="s1">slide</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">             </span></span><span class="s12">const</span><span class="s5"> channels </span><span class="s8">=</span><span class="s5"> </span><span class="s8">[</span><span class="s1">"@mesalva"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@fisiquei"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@ideiafisica"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@profdouglasgomes"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@professorboaro"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@fisica2.0"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@cienciatododia"</span><span class="s8">,</span><span class="s5"> </span><span class="s1">"@stoodi"</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span></span><span class="s12">const</span><span class="s1"> topic </span><span class="s8">=</span><span class="s1"> slide</span><span class="s8">.</span><span class="s1">diaryPrompt</span><span class="s8">.</span><span class="s1">split</span><span class="s8">(</span><span class="s9">"."</span><span class="s8">)[</span><span class="s14">0</span><span class="s8">];</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">             </span>videoGridEl</span><span class="s8">.</span><span class="s5">innerHTML </span><span class="s8">=</span><span class="s5"> </span><span class="s1">'&lt;div class="flex justify-center items-center"&gt;&lt;div class="loader"&gt;&lt;/div&gt;&lt;span&gt;Buscando vídeos de treinamento...&lt;/span&gt;&lt;/div&gt;'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span>videoModalEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">             </span></span><span class="s1">// Simulação da busca de vídeos</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span>setTimeout</span><span class="s8">(()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>videoGridEl</span><span class="s8">.</span><span class="s1">innerHTML </span><span class="s8">=</span><span class="s1"> </span><span class="s9">`</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-orbitron text-xl text-cyan-300 mb-2"&gt;Indicação Superior&lt;/h4&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="grid grid-cols-1 sm:grid-cols-3 gap-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;a href="#" class="block bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/70" title="Assistir vídeo sobre Conceito de </span><span class="s8">${</span><span class="s5">topic</span><span class="s8">}</span><span class="s1">"&gt;&lt;img src="https://placehold.co/160x90/1a1a2e/4169E1?text=Vídeo+1" class="w-full rounded-md mb-2"&gt;&lt;p class="text-sm"&gt;Conceito de </span><span class="s8">${</span><span class="s5">topic</span><span class="s8">}</span><span class="s1">&lt;/p&gt;&lt;/a&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;a href="#" class="block bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/70" title="Assistir vídeo sobre Exercício Resolvido"&gt;&lt;img src="https://placehold.co/160x90/1a1a2e/4169E1?text=Vídeo+2" class="w-full rounded-md mb-2"&gt;&lt;p class="text-sm"&gt;Exercício Resolvido&lt;/p&gt;&lt;/a&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;a href="#" class="block bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/70" title="Assistir vídeo sobre Aplicação Prática"&gt;&lt;img src="https://placehold.co/160x90/1a1a2e/4169E1?text=Vídeo+3" class="w-full rounded-md mb-2"&gt;&lt;p class="text-sm"&gt;Aplicação Prática&lt;/p&gt;&lt;/a&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-orbitron text-xl text-cyan-300 mb-2"&gt;Possibilidade Integrativa&lt;/h4&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="grid grid-cols-1 sm:grid-cols-3 gap-4"&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;a href="#" class="block bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/70" title="Assistir vídeo sobre Aula Completa"&gt;&lt;img src="https://placehold.co/160x90/1a1a2e/4169E1?text=Vídeo+4" class="w-full rounded-md mb-2"&gt;&lt;p class="text-sm"&gt;Aula Completa&lt;/p&gt;&lt;/a&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;a href="#" class="block bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/70" title="Assistir vídeo sobre Dica Rápida"&gt;&lt;img src="https://placehold.co/160x90/1a1a2e/4169E1?text=Vídeo+5" class="w-full rounded-md mb-2"&gt;&lt;p class="text-sm"&gt;Dica Rápida&lt;/p&gt;&lt;/a&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;a href="#" class="block bg-gray-800/50 p-2 rounded-lg hover:bg-gray-700/70" title="Assistir vídeo sobre Documentário Relacionado"&gt;&lt;img src="https://placehold.co/160x90/1a1a2e/4169E1?text=Vídeo+6" class="w-full rounded-md mb-2"&gt;&lt;p class="text-sm"&gt;Documentário Relacionado&lt;/p&gt;&lt;/a&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span></span><span class="s8">},</span><span class="s1"> </span><span class="s14">1500</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>videoCloseBtn</span><span class="s8">.</span><span class="s1">onclick </span><span class="s8">=</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>videoModalEl</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p7"><span class="s13"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s8">.</span><span class="s1">onload </span><span class="s8">=</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>renderSlide</span><span class="s8">(</span><span class="s1">currentSlideId</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">};</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s13"></span><br></p>
</body>
</html>
